<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=80ajy5bDFqQBnM5FPUtU7QAWcPVeB1Rq"></script>
    <script type="text/javascript" src="http://api.map.baidu.com/library/Heatmap/2.0/src/Heatmap_min.js"></script>
    <title>热力图功能示例</title>
    <style type="text/css">
		ul,li{list-style: none;margin:0;padding:0;float:left;}
		html{height:100%}
		body{height:100%;margin:0px;padding:0px;font-family:"微软雅黑";}
		#container{height:500px;width:100%;}
		#r-result{width:100%;}
    </style>	
</head>
<body>
	<div id="container"></div>
	<div id="r-result">
		<input type="button"  onclick="openHeatmap();" value="显示热力图"/><input type="button"  onclick="closeHeatmap();" value="关闭热力图"/>
	</div>
</body>
</html>
<script type="text/javascript">
    var map = new BMap.Map("container");          // 创建地图实例

    var point = new BMap.Point(114.0941359287303, 22.471010688058605);
    map.centerAndZoom(point, 13);             // 初始化地图，设置中心点坐标和地图级别
    map.enableScrollWheelZoom(); // 允许滚轮缩放
    var points =[{'lng': 113.50425081792012, 'lat': 22.3422606, 'count': 26.810825},{'lng': 113.41237491319694, 'lat': 22.3422604, 'count': 26.023091},{'lng': 113.70757195435938, 'lat': 22.3422603, 'count': 29.550701},{'lng': 113.67296919713478, 'lat': 22.3422604, 'count': 34.15578},{'lng': 113.40311193962617, 'lat': 22.3422609, 'count': 29.996889},{'lng': 113.5000137973165, 'lat': 22.3422607, 'count': 28.386386},{'lng': 113.51797244730265, 'lat': 22.3422606, 'count': 29.611363},{'lng': 113.42844387722353, 'lat': 22.342260999999997, 'count': 29.225203},{'lng': 113.38126921767197, 'lat': 22.3422608, 'count': 28.427749},{'lng': 113.71632099023095, 'lat': 22.3422606, 'count': 30.898724},{'lng': 113.43558494624143, 'lat': 22.3422609, 'count': 28.69971},{'lng': 113.37268058786967, 'lat': 22.3422612, 'count': 27.361247},{'lng': 113.70298677889609, 'lat': 22.342260999999997, 'count': 26.09139},{'lng': 113.64369169256211, 'lat': 22.342260999999997, 'count': 30.356263},{'lng': 113.5003447284544, 'lat': 22.342260999999997, 'count': 27.966966},{'lng': 113.45958699670969, 'lat': 22.342260999999997, 'count': 30.21747},{'lng': 113.544200662754, 'lat': 22.3422609, 'count': 30.415371},{'lng': 113.40609760871287, 'lat': 22.3422608, 'count': 31.513863},{'lng': 113.40655066356251, 'lat': 22.3422608, 'count': 31.621184},{'lng': 113.75423767673409, 'lat': 22.3422607, 'count': 28.682628},{'lng': 113.38107632997317, 'lat': 22.3422607, 'count': 27.786602},{'lng': 113.39851209937355, 'lat': 22.3422607, 'count': 28.100781},{'lng': 113.57316415691079, 'lat': 22.3422609, 'count': 28.274283},{'lng': 113.54478506748086, 'lat': 22.3422609, 'count': 29.912731},{'lng': 113.37985685984214, 'lat': 22.342260999999997, 'count': 29.611915},{'lng': 113.45114827888288, 'lat': 22.342260999999997, 'count': 29.405294},{'lng': 113.49563594737269, 'lat': 22.3422612, 'count': 23.801104},{'lng': 113.64980395592642, 'lat': 22.3422614, 'count': 31.706863},{'lng': 113.70492782998154, 'lat': 22.3422615, 'count': 29.233656},{'lng': 113.510067668311, 'lat': 22.3422616, 'count': 29.965588},{'lng': 113.66757127924862, 'lat': 22.3422616, 'count': 30.886226},{'lng': 113.4545332394686, 'lat': 22.3422615, 'count': 25.104696},{'lng': 113.67832815683445, 'lat': 22.3422615, 'count': 30.041943},{'lng': 113.67118814698887, 'lat': 22.3422614, 'count': 28.680049},{'lng': 113.43023837098143, 'lat': 22.3422614, 'count': 30.966513},{'lng': 113.72871362869721, 'lat': 22.3422614, 'count': 26.1435},{'lng': 113.4729747037192, 'lat': 22.3422614, 'count': 33.703771},{'lng': 113.3675513795479, 'lat': 22.3422615, 'count': 34.59464},{'lng': 113.6384777768258, 'lat': 22.3422615, 'count': 31.101385},{'lng': 113.41824241278617, 'lat': 22.3422615, 'count': 27.230383},{'lng': 113.64530264099272, 'lat': 22.3422615, 'count': 28.297632},{'lng': 113.58550369055091, 'lat': 22.3422615, 'count': 29.160529},{'lng': 113.72443469902491, 'lat': 22.3422614, 'count': 27.193667},{'lng': 113.55736377174455, 'lat': 22.3422615, 'count': 26.072734},{'lng': 113.6401588254899, 'lat': 22.3422615, 'count': 25.258226},{'lng': 113.49806663230626, 'lat': 22.3422615, 'count': 23.256526},{'lng': 113.73083528983427, 'lat': 22.3422615, 'count': 29.014515},{'lng': 113.50059984533237, 'lat': 22.3422615, 'count': 28.024076},{'lng': 113.65563303544589, 'lat': 22.3422616, 'count': 26.871959},{'lng': 113.53717804528951, 'lat': 22.3422615, 'count': 31.155909},{'lng': 113.5291336615011, 'lat': 22.3422615, 'count': 29.567273},{'lng': 113.76095614694587, 'lat': 22.3422616, 'count': 30.07849},{'lng': 113.37859763747643, 'lat': 22.3422616, 'count': 26.899684},{'lng': 113.58076293650619, 'lat': 22.3422616, 'count': 30.718182},{'lng': 113.46484587284417, 'lat': 22.3422615, 'count': 31.090644},{'lng': 113.52465263607426, 'lat': 22.3422615, 'count': 26.19071},{'lng': 113.70946230106736, 'lat': 22.3422615, 'count': 26.852167},{'lng': 113.49516382466003, 'lat': 22.3422615, 'count': 22.65388},{'lng': 113.46495497929907, 'lat': 22.3422615, 'count': 29.1511},{'lng': 113.60945146611485, 'lat': 22.3422615, 'count': 26.118625},{'lng': 113.59253402806614, 'lat': 22.3422615, 'count': 30.791315},{'lng': 113.69374116900988, 'lat': 22.3422614, 'count': 31.115641},{'lng': 113.60902747287969, 'lat': 22.3422614, 'count': 29.631444},{'lng': 113.59182196361684, 'lat': 22.3422615, 'count': 27.784394},{'lng': 113.6252259690725, 'lat': 22.3422615, 'count': 30.430281},{'lng': 113.39691822285859, 'lat': 22.3422615, 'count': 28.375334},{'lng': 113.50468541197682, 'lat': 22.3422615, 'count': 29.816973},{'lng': 113.5629845955897, 'lat': 22.3422616, 'count': 29.600549},{'lng': 113.39855694561054, 'lat': 22.3422615, 'count': 27.693672},{'lng': 113.39535446385354, 'lat': 22.3422614, 'count': 28.695767},{'lng': 113.68830192587566, 'lat': 22.3422614, 'count': 29.711009},{'lng': 113.66380869902176, 'lat': 22.3422614, 'count': 29.608971},{'lng': 113.69180199359361, 'lat': 22.3422614, 'count': 29.531607},{'lng': 113.44981564395961, 'lat': 22.3422614, 'count': 28.836006},{'lng': 113.56751931161017, 'lat': 22.3422614, 'count': 31.282439},{'lng': 113.71219993528427, 'lat': 22.3422613, 'count': 31.078042},{'lng': 113.37227746061357, 'lat': 22.3422613, 'count': 28.563105},{'lng': 113.47526195462225, 'lat': 22.3422613, 'count': 27.25361},{'lng': 113.7618310793602, 'lat': 22.3422613, 'count': 27.469718},{'lng': 113.57188951498338, 'lat': 22.3422614, 'count': 24.89034},{'lng': 113.7534742160522, 'lat': 22.3422614, 'count': 25.747872},{'lng': 113.75519574014797, 'lat': 22.3422615, 'count': 31.043816},{'lng': 113.56597118222759, 'lat': 22.3422615, 'count': 27.913316},{'lng': 113.37884067962533, 'lat': 22.3422615, 'count': 33.512983},{'lng': 113.72975544291373, 'lat': 22.3422614, 'count': 33.141823},{'lng': 113.46570982810198, 'lat': 22.3422614, 'count': 29.55827},{'lng': 113.73611093058132, 'lat': 22.3422613, 'count': 25.860867},{'lng': 113.37565220419037, 'lat': 22.3422613, 'count': 34.865531},{'lng': 113.62464669554036, 'lat': 22.3422613, 'count': 29.280792},{'lng': 113.47023715595303, 'lat': 22.3422613, 'count': 23.290093},{'lng': 113.46723897509195, 'lat': 22.3422613, 'count': 34.016365},{'lng': 113.49203764354984, 'lat': 22.3422613, 'count': 29.613976},{'lng': 113.58924428671018, 'lat': 22.3422613, 'count': 30.782887},{'lng': 113.57595706031303, 'lat': 22.3422613, 'count': 27.452478},{'lng': 113.61721304642789, 'lat': 22.3422613, 'count': 30.069097},{'lng': 113.62029636430853, 'lat': 22.3422613, 'count': 29.47686},{'lng': 113.58744171959968, 'lat': 22.3422612, 'count': 30.447649},{'lng': 113.45978094641404, 'lat': 22.3422612, 'count': 30.998406},{'lng': 113.73768538596342, 'lat': 22.3422612, 'count': 30.649308},{'lng': 113.68221346984363, 'lat': 22.3422612, 'count': 30.872002},{'lng': 113.54858243340132, 'lat': 22.3422612, 'count': 30.600175},{'lng': 113.38919951747076, 'lat': 22.3422612, 'count': 29.009672},{'lng': 113.73972600741392, 'lat': 22.3422612, 'count': 30.865026},{'lng': 113.44155006728975, 'lat': 22.3422612, 'count': 27.394003},{'lng': 113.51012111027809, 'lat': 22.3422613, 'count': 33.73395},{'lng': 113.38959277789867, 'lat': 22.3422612, 'count': 29.608051},{'lng': 113.48280874223761, 'lat': 22.3422612, 'count': 31.151645},{'lng': 113.38484886233807, 'lat': 22.3422612, 'count': 29.799203},{'lng': 113.6282173941715, 'lat': 22.3422613, 'count': 25.675471},{'lng': 113.59424601072024, 'lat': 22.3422611, 'count': 29.211801},{'lng': 113.42783843418604, 'lat': 22.3422611, 'count': 33.620807},{'lng': 113.6616026032153, 'lat': 22.3422611, 'count': 30.955207},{'lng': 113.61685140274992, 'lat': 22.3422609, 'count': 28.806971},{'lng': 113.70427867334145, 'lat': 22.3422608, 'count': 30.490466},{'lng': 113.74241168489687, 'lat': 22.3422608, 'count': 28.42473},{'lng': 113.40095811205278, 'lat': 22.3422608, 'count': 34.195057},{'lng': 113.59539062389933, 'lat': 22.3422608, 'count': 33.906807},{'lng': 113.37285509249256, 'lat': 22.3422608, 'count': 30.022628},{'lng': 113.59533286953571, 'lat': 22.3422608, 'count': 30.86154},{'lng': 113.54398546182735, 'lat': 22.3422609, 'count': 30.066188},{'lng': 113.73779499543181, 'lat': 22.342260200000002, 'count': 29.707733},{'lng': 113.4775854756715, 'lat': 22.342260200000002, 'count': 31.516016},{'lng': 113.48311321861142, 'lat': 22.342260200000002, 'count': 28.967945},{'lng': 113.75635910164266, 'lat': 22.3422603, 'count': 30.429472},{'lng': 113.65372421152658, 'lat': 22.342260099999997, 'count': 31.439092},{'lng': 113.71986396433135, 'lat': 22.3422597, 'count': 29.271514},{'lng': 113.62266696545724, 'lat': 22.3422594, 'count': 28.596572},{'lng': 113.70991457368312, 'lat': 22.3422594, 'count': 26.949657},{'lng': 113.4534785398281, 'lat': 22.3422594, 'count': 30.75358},{'lng': 113.55439113702386, 'lat': 22.342259199999997, 'count': 29.943229},{'lng': 113.58015113525097, 'lat': 22.3422588, 'count': 29.206882},{'lng': 113.37214000852018, 'lat': 22.342258400000002, 'count': 28.014609},{'lng': 113.38208728669373, 'lat': 22.3422582, 'count': 30.372599},{'lng': 113.42725854003706, 'lat': 22.3422579, 'count': 28.834862},{'lng': 113.39707524003725, 'lat': 22.342257800000002, 'count': 31.090775},{'lng': 113.44918315272625, 'lat': 22.342257500000002, 'count': 28.038682},{'lng': 113.6756626816162, 'lat': 22.342257399999998, 'count': 29.311848},{'lng': 113.3673596342431, 'lat': 22.342257399999998, 'count': 29.311848},{'lng': 113.53272438798946, 'lat': 22.342257399999998, 'count': 28.525641},{'lng': 113.41565482716307, 'lat': 22.342257399999998, 'count': 30.683136},{'lng': 113.63979456411501, 'lat': 22.3422573, 'count': 28.805663},{'lng': 113.72513493235716, 'lat': 22.3422573, 'count': 29.915818},{'lng': 113.62743387107541, 'lat': 22.3422572, 'count': 29.265358},{'lng': 113.4494942617216, 'lat': 22.3422573, 'count': 33.583399},{'lng': 113.6962827548768, 'lat': 22.342257599999996, 'count': 29.750075},{'lng': 113.52829458128092, 'lat': 22.3422577, 'count': 29.037808},{'lng': 113.64626254593026, 'lat': 22.3422572, 'count': 29.052325},{'lng': 113.63971956839093, 'lat': 22.3422572, 'count': 27.955614},{'lng': 113.37560304077552, 'lat': 22.342257, 'count': 28.432792},{'lng': 113.44592299932421, 'lat': 22.342256900000002, 'count': 27.964987},{'lng': 113.38210345785595, 'lat': 22.342256900000002, 'count': 28.956503},{'lng': 113.67356870292679, 'lat': 22.3422568, 'count': 30.705398},{'lng': 113.50868084839163, 'lat': 22.3422568, 'count': 29.667189},{'lng': 113.44937364603244, 'lat': 22.342256900000002, 'count': 29.358589},{'lng': 113.48321951641532, 'lat': 22.3422568, 'count': 30.1662},{'lng': 113.74935633623922, 'lat': 22.342256699999997, 'count': 30.163533},{'lng': 113.46916190569473, 'lat': 22.3422564, 'count': 29.076273},{'lng': 113.69094311156377, 'lat': 22.3422562, 'count': 27.3646},{'lng': 113.71623971921424, 'lat': 22.3422561, 'count': 28.596736},{'lng': 113.63182526614216, 'lat': 22.342256000000003, 'count': 30.168201},{'lng': 113.73039132954854, 'lat': 22.3422559, 'count': 31.22344},{'lng': 113.60624597445047, 'lat': 22.3422557, 'count': 28.497559},{'lng': 113.72423848753634, 'lat': 22.3422553, 'count': 32.423771},{'lng': 113.64126936955074, 'lat': 22.3422548, 'count': 30.312624},{'lng': 113.55483896900236, 'lat': 22.3422546, 'count': 29.409788},{'lng': 113.5495246128059, 'lat': 22.3422543, 'count': 32.052436},{'lng': 113.51793514161128, 'lat': 22.342253999999997, 'count': 30.696345},{'lng': 113.56240400161629, 'lat': 22.3422534, 'count': 29.924322},{'lng': 113.60647059854227, 'lat': 22.342253, 'count': 28.740032},{'lng': 113.64784497619704, 'lat': 22.3422525, 'count': 29.935088},{'lng': 113.74667732270909, 'lat': 22.3422519, 'count': 27.926402},{'lng': 113.750610465052, 'lat': 22.342251299999997, 'count': 28.995981},{'lng': 113.48327501517244, 'lat': 22.3422509, 'count': 29.290824},{'lng': 113.36584605676937, 'lat': 22.342250600000003, 'count': 30.532227},{'lng': 113.60739039195306, 'lat': 22.3422502, 'count': 28.504295},{'lng': 113.75572567409783, 'lat': 22.3422498, 'count': 28.275514},{'lng': 113.45593596307026, 'lat': 22.3422493, 'count': 30.369024},{'lng': 113.39740072871494, 'lat': 22.3422489, 'count': 30.393757},{'lng': 113.58235957317875, 'lat': 22.3422483, 'count': 30.769924},{'lng': 113.36291331726146, 'lat': 22.342247200000003, 'count': 26.898499},{'lng': 113.55737295220528, 'lat': 22.3422467, 'count': 30.340679},{'lng': 113.36584893753458, 'lat': 22.342246300000003, 'count': 30.014952},{'lng': 113.75831934089976, 'lat': 22.342246300000003, 'count': 30.014952},{'lng': 113.4479963509731, 'lat': 22.3422458, 'count': 29.682835},{'lng': 113.67178735597463, 'lat': 22.3422453, 'count': 28.354705},{'lng': 113.76063079592603, 'lat': 22.3422451, 'count': 29.188388},{'lng': 113.47409924344565, 'lat': 22.3422449, 'count': 30.590406},{'lng': 113.5865846062665, 'lat': 22.3422448, 'count': 29.820591},{'lng': 113.58292731236102, 'lat': 22.342244500000003, 'count': 33.644021},{'lng': 113.51220215802181, 'lat': 22.3422443, 'count': 29.975753},{'lng': 113.44134931958284, 'lat': 22.342244, 'count': 28.786865},{'lng': 113.6629429953313, 'lat': 22.342243800000002, 'count': 32.373194},{'lng': 113.53891501126517, 'lat': 22.342243600000003, 'count': 32.156647},{'lng': 113.50591316407566, 'lat': 22.3422434, 'count': 29.630448},{'lng': 113.73695988862498, 'lat': 22.3422421, 'count': 29.467407},{'lng': 113.61907742129449, 'lat': 22.3422416, 'count': 31.400794},{'lng': 113.61387353288403, 'lat': 22.342240999999998, 'count': 28.168407},{'lng': 113.61421792799028, 'lat': 22.3422413, 'count': 30.003085},{'lng': 113.37368494977662, 'lat': 22.3422416, 'count': 32.598444},{'lng': 113.76136847019485, 'lat': 22.342241899999998, 'count': 32.58045},{'lng': 113.67711094186471, 'lat': 22.342240999999998, 'count': 28.635398},{'lng': 113.47280851250082, 'lat': 22.3422408, 'count': 29.401844},{'lng': 113.40606469978525, 'lat': 22.342241100000003, 'count': 28.925465},{'lng': 113.42412277487749, 'lat': 22.3422405, 'count': 30.196855},{'lng': 113.39990528331525, 'lat': 22.3422406, 'count': 29.130635},{'lng': 113.529148334928, 'lat': 22.342242000000002, 'count': 32.66504},{'lng': 113.46940022398368, 'lat': 22.3422414, 'count': 31.808454},{'lng': 113.6427599819032, 'lat': 22.3422414, 'count': 27.610988},{'lng': 113.40244635245732, 'lat': 22.3422413, 'count': 29.583106},{'lng': 113.7311602330723, 'lat': 22.3422416, 'count': 29.666449},{'lng': 113.63293402044188, 'lat': 22.3422416, 'count': 28.971568},{'lng': 113.36475494951105, 'lat': 22.3422412, 'count': 32.923382},{'lng': 113.6857274186512, 'lat': 22.342240999999998, 'count': 29.207795},{'lng': 113.66067442486694, 'lat': 22.3422416, 'count': 30.317853},{'lng': 113.6943582324746, 'lat': 22.3422415, 'count': 28.745127},{'lng': 113.38406366621699, 'lat': 22.3422409, 'count': 29.972453},{'lng': 113.36860708494102, 'lat': 22.3422408, 'count': 26.850988},{'lng': 113.65973707234934, 'lat': 22.3422414, 'count': 28.309663},{'lng': 113.65341459098806, 'lat': 22.3422415, 'count': 29.926344},{'lng': 113.51184019933442, 'lat': 22.3422413, 'count': 28.785092},{'lng': 113.65325788620997, 'lat': 22.3422416, 'count': 29.642296},{'lng': 113.71345416567343, 'lat': 22.3422415, 'count': 28.928357},{'lng': 113.64161964729176, 'lat': 22.3422414, 'count': 30.295684},{'lng': 113.6184913647069, 'lat': 22.342240999999998, 'count': 27.488001},{'lng': 113.66731306989284, 'lat': 22.3422408, 'count': 28.027265},{'lng': 113.57846170239637, 'lat': 22.342241100000003, 'count': 29.119499},{'lng': 113.52888244900375, 'lat': 22.3422412, 'count': 29.632108},{'lng': 113.43986009436779, 'lat': 22.3422412, 'count': 30.468259},{'lng': 113.75858800385637, 'lat': 22.3422409, 'count': 27.017266},{'lng': 113.37173633851305, 'lat': 22.342240999999998, 'count': 32.302768},{'lng': 113.73625823380506, 'lat': 22.3422408, 'count': 32.309946},{'lng': 113.53077214832206, 'lat': 22.3422408, 'count': 29.107648},{'lng': 113.71961065624694, 'lat': 22.3422407, 'count': 29.394518},{'lng': 113.46373156669237, 'lat': 22.3422409, 'count': 32.385747},{'lng': 113.69075451309597, 'lat': 22.3422409, 'count': 30.320488},{'lng': 113.58339820334983, 'lat': 22.342241100000003, 'count': 27.092975},{'lng': 113.38907762905862, 'lat': 22.342240099999998, 'count': 29.343159},{'lng': 113.55191717622897, 'lat': 22.342240200000003, 'count': 28.691595},{'lng': 113.73017577562138, 'lat': 22.342240099999998, 'count': 28.496685},{'lng': 113.56880905412388, 'lat': 22.3422404, 'count': 32.098772},{'lng': 113.52649464984582, 'lat': 22.3422405, 'count': 30.193942},{'lng': 113.68943599917456, 'lat': 22.3422405, 'count': 29.39538},{'lng': 113.57325694051336, 'lat': 22.3422404, 'count': 27.867459},{'lng': 113.7600095665875, 'lat': 22.3422405, 'count': 27.077236},{'lng': 113.49627075268101, 'lat': 22.3422405, 'count': 29.103064},{'lng': 113.49931360743527, 'lat': 22.3422405, 'count': 29.294975},{'lng': 113.49730059477706, 'lat': 22.3422405, 'count': 29.328612},{'lng': 113.58265466403687, 'lat': 22.3422406, 'count': 29.025552},{'lng': 113.50685031481841, 'lat': 22.3422408, 'count': 28.759129},{'lng': 113.40675697323194, 'lat': 22.3422408, 'count': 28.678627},{'lng': 113.69955070533742, 'lat': 22.3422408, 'count': 30.052082},{'lng': 113.42064848027071, 'lat': 22.3422408, 'count': 27.911379},{'lng': 113.47644742414383, 'lat': 22.3422408, 'count': 28.105762},{'lng': 113.51784809722177, 'lat': 22.3422408, 'count': 27.167933},{'lng': 113.67718971298336, 'lat': 22.3422409, 'count': 28.964118},{'lng': 113.62617228987963, 'lat': 22.342240999999998, 'count': 29.961104},{'lng': 113.46920601746727, 'lat': 22.3422409, 'count': 29.180119},{'lng': 113.7017935070306, 'lat': 22.3422409, 'count': 27.101048},{'lng': 113.67028212561769, 'lat': 22.342240999999998, 'count': 28.538252},{'lng': 113.42514465856203, 'lat': 22.342240999999998, 'count': 30.089877},{'lng': 113.49609230771425, 'lat': 22.342241100000003, 'count': 29.337487},{'lng': 113.47006248592356, 'lat': 22.3422412, 'count': 27.676807},{'lng': 113.60219137221208, 'lat': 22.3422412, 'count': 27.792331},{'lng': 113.6526586716203, 'lat': 22.3422413, 'count': 32.688874},{'lng': 113.47331023767282, 'lat': 22.3422414, 'count': 28.499534},{'lng': 113.74678755930428, 'lat': 22.3422414, 'count': 28.649092},{'lng': 113.43211747497556, 'lat': 22.3422415, 'count': 28.692423},{'lng': 113.40655161770172, 'lat': 22.3422416, 'count': 28.231005},{'lng': 113.38895393412974, 'lat': 22.3422415, 'count': 28.705876},{'lng': 113.4060029294782, 'lat': 22.3422414, 'count': 31.08179},{'lng': 113.36790408098422, 'lat': 22.3422415, 'count': 29.445028},{'lng': 113.55569506208309, 'lat': 22.3422417, 'count': 28.653771},{'lng': 113.36688501658077, 'lat': 22.3422418, 'count': 30.417147},{'lng': 113.52187011542406, 'lat': 22.3422417, 'count': 27.18381},{'lng': 113.61674225286343, 'lat': 22.3422417, 'count': 30.517958},{'lng': 113.67584477699641, 'lat': 22.3422417, 'count': 28.846919},{'lng': 113.67442792161935, 'lat': 22.3422417, 'count': 29.903895},{'lng': 113.47614949819199, 'lat': 22.3422417, 'count': 29.447881},{'lng': 113.51754074653631, 'lat': 22.3422418, 'count': 34.24078},{'lng': 113.55494867108007, 'lat': 22.3422418, 'count': 34.013004},{'lng': 113.40391259171776, 'lat': 22.3422418, 'count': 34.013004},{'lng': 113.46278529287859, 'lat': 22.342241899999998, 'count': 29.195647},{'lng': 113.37949697992173, 'lat': 22.342241899999998, 'count': 31.032972},{'lng': 113.67615864418137, 'lat': 22.342242000000002, 'count': 33.837023},{'lng': 113.52424846572286, 'lat': 22.342241899999998, 'count': 33.937943},{'lng': 113.70768527201858, 'lat': 22.3422418, 'count': 29.249881},{'lng': 113.61945844533791, 'lat': 22.3422418, 'count': 29.940438},{'lng': 113.60371874571823, 'lat': 22.342241899999998, 'count': 28.54476},{'lng': 113.3672474658983, 'lat': 22.342241899999998, 'count': 32.348142},{'lng': 113.75081192556173, 'lat': 22.342241899999998, 'count': 26.827103},{'lng': 113.55188058581385, 'lat': 22.3422422, 'count': 30.252783}];
    if(!isSupportCanvas()){
    	alert('热力图目前只支持有canvas支持的浏览器,您所使用的浏览器不能使用热力图功能~')
    }
	//详细的参数,可以查看heatmap.js的文档 https://github.com/pa7/heatmap.js/blob/master/README.md
	//参数说明如下:
	/* visible 热力图是否显示,默认为true
     * opacity 热力的透明度,1-100
     * radius 势力图的每个点的半径大小   
     * gradient  {JSON} 热力图的渐变区间 . gradient如下所示
     *	{
			.2:'rgb(0, 255, 255)',
			.5:'rgb(0, 110, 255)',
			.8:'rgb(100, 0, 255)'
		}
		其中 key 表示插值的位置, 0~1. 
		    value 为颜色值. 
     */
	heatmapOverlay = new BMapLib.HeatmapOverlay({"radius":20});
	map.addOverlay(heatmapOverlay);
	heatmapOverlay.setDataSet({data:points,max:40});
	//是否显示热力图
    function openHeatmap(){
        heatmapOverlay.show();
    }
	function closeHeatmap(){
        heatmapOverlay.hide();
    }
	closeHeatmap();
    function setGradient(){
     	/*格式如下所示:
		{
	  		0:'rgb(102, 255, 0)',
	 	 	.5:'rgb(255, 170, 0)',
		  	1:'rgb(255, 0, 0)'
		}*/
     	var gradient = {};
     	var colors = document.querySelectorAll("input[type='color']");
     	colors = [].slice.call(colors,0);
     	colors.forEach(function(ele){
			gradient[ele.getAttribute("data-key")] = ele.value; 
     	});
        heatmapOverlay.setOptions({"gradient":gradient});
    }
	//判断浏览区是否支持canvas
    function isSupportCanvas(){
        var elem = document.createElement('canvas');
        return !!(elem.getContext && elem.getContext('2d'));
    }
</script>